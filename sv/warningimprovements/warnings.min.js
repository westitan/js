var SV=SV||{};
(function(b,f,g,h){SV.WarningViewToggler=XF.Element.newHandler({eventNameSpace:"SVWarningViewToggler",options:{},$selectViewContainer:null,$radioViewContainer:null,toggleSelectViewPhrase:null,toggleRadioViewPhrase:null,storageName:"xf_sv_warning_view",setting:null,init:function(){var a=this.$target.data("select-view"),c=this.$target.data("radio-view");if(a)if(c){var d=this.$target.data("toggle-select-phrase"),e=this.$target.data("toggle-radio-phrase");d?e?(this.selectViewContainer=a,this.radioViewContainer=
c,this.toggleSelectViewPhrase=d,this.toggleRadioViewPhrase=e,this.setting=localStorage.getItem(this.storageName),this.$target.on("click",b.proxy(this,"click")),"select"===this.setting?this.showSelectView():this.showRadioView()):console.error("Warning View Toggler must have a data-toggle-radio-phrase"):console.error("Warning View Toggler must have a data-toggle-select-phrase")}else console.error("Warning View Toggler must have a data-radio-view");else console.error("Warning View Toggler must have a data-select-view")},
click:function(a){a.preventDefault();this.toggle()},toggle:function(){"select"===this.setting?this.setSetting("radio"):this.setSetting("select");f.location.reload()},showSelectView:function(){b(this.selectViewContainer).xfFadeDown();this.$target.text(this.toggleRadioViewPhrase);b('[data-warning-view-type="radio"]').remove();b(this.radioViewContainer).xfFadeUp();b(this.radioViewContainer).remove();b('select[data-warning-select="true"]').trigger("change")},showRadioView:function(){b(this.radioViewContainer).xfFadeDown();
this.$target.text(this.toggleSelectViewPhrase);b('[data-warning-view-type="select"]').remove();b(this.selectViewContainer).xfFadeUp();b(this.selectViewContainer).remove();b('input[type=radio][data-warning-radio="true"]:enabled:visible:checked').first().trigger("click")},getSetting:function(){return this.setting},setSetting:function(a){this.setting=a;localStorage.setItem(this.storageName,this.setting)}});SV.WarningViewSelect=XF.Element.newHandler({eventNameSpace:"WarningViewSelect",options:{},$container:null,
init:function(){var a={tags:!1,width:"100%",containerCssClass:"input",minimumInputLength:0,selectOnClose:!0,openOnEnter:!0,disabled:this.$target.prop("disabled")};this.$target.select2(a);a=this.$target.data("select2");this.$container=a.$container;this.$selection=a.$selection;a.on("results:message",function(a){this.dropdown._resizeDropdown();this.dropdown._positionDropdown()});a.$selection.addClass("is-focused");a.$container.on("focusin focusout",b.proxy(this,"inputFocusBlur"));this.$target.on("change",
b.proxy(this,"change"))},inputFocusBlur:function(a){switch(a.type){case "focusout":this.$selection.removeClass("is-focused");break;default:this.$selection.addClass("is-focused")}},change:function(a){this.$target.trigger("click");b("input[type=text][name=custom_title]").val("")}});SV.WarningTitleWatcher=XF.Element.newHandler({eventNameSpace:"WarningTitleWatcher",options:{},init:function(){this.$target.on("change",b.proxy(this,"change"));this.$target.on("input",b.proxy(this,"input"));if(this.$target.is("input:radio"))this.$target.on("click",
b.proxy(this,"click"))},change:function(){this.input()},click:function(){this.input()},input:function(){if(this.$target.is("input:text"))this.setPublicMessage(this.$target.val());else if(this.$target.is("input:radio"))b("input[data-warning-title-input=1][data-for-warning="+this.$target.val()+"]").parent().parent().parent().xfFadeDown(XF.config.speed.xxfast,function(){}),b("input[data-warning-title-input=1][data-for-warning!='"+this.$target.val()+"']").parent().parent().parent().xfFadeUp(XF.config.speed.xxfast),
this.setPublicMessage(""),this.$target.is("[data-warning-label]")&&this.setPublicMessage(this.$target.data("warning-label"));else if(this.$target.is("select")){b("input[data-warning-title-input=1][data-for-warning!='"+this.$target.find("option:selected").val()+"']").prop("disabled",!0).parent().parent().xfFadeUp(XF.config.speed.xxfast);var a=this.$target.find("option:selected").val(),c=b("input[data-warning-title-input=1][data-for-warning="+a+"]");a=b("dl[data-for-warning="+a+"][data-warning-label]");
var d="";0<a.length&&(d=a.data("warning-label"),c.prop("value",d));this.setPublicMessage(d);"hidden"!==c.prop("type")&&c.prop("disabled",!1).parent().parent().xfFadeDown(XF.config.speed.xxfast)}},setPublicMessage:function(a){XF.config.sv_warningimprovements_copy_title&&b("input[name='action_options[public_message]']").prop("value",a)}});XF.Element.register("warning-view-toggle","SV.WarningViewToggler");XF.Element.register("warning-view-select","SV.WarningViewSelect");XF.Element.register("warning-title-watcher",
"SV.WarningTitleWatcher")})(jQuery,window,document);
